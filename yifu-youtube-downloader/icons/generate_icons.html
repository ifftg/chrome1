<!DOCTYPE html>
<html>
<head>
    <title>生成Chrome插件图标</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        canvas { border: 1px solid #ccc; margin: 10px; }
        .download-section { margin: 20px 0; }
        .download-link { display: block; margin: 5px 0; padding: 5px 10px; background: #4CAF50; color: white; text-decoration: none; border-radius: 4px; width: 150px; text-align: center; }
    </style>
</head>
<body>
    <h2>Chrome插件图标生成器</h2>
    <p>点击"生成图标"按钮，然后右键点击下载链接保存图片</p>
    
    <button onclick="generateAllIcons()" style="background: #2196F3; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">生成图标</button>
    
    <div>
        <h3>16x16 图标:</h3>
        <canvas id="canvas16" width="16" height="16"></canvas>
        <a id="download16" class="download-link" style="display:none;" download="icon16.png">下载 icon16.png</a>
    </div>
    
    <div>
        <h3>48x48 图标:</h3>
        <canvas id="canvas48" width="48" height="48"></canvas>
        <a id="download48" class="download-link" style="display:none;" download="icon48.png">下载 icon48.png</a>
    </div>
    
    <div>
        <h3>128x128 图标:</h3>
        <canvas id="canvas128" width="128" height="128"></canvas>
        <a id="download128" class="download-link" style="display:none;" download="icon128.png">下载 icon128.png</a>
    </div>

    <script>
        function drawIcon(canvas, size) {
            const ctx = canvas.getContext('2d');
            const center = size / 2;
            const radius = Math.max(size * 0.35, 6);
            
            // 清除画布
            ctx.clearRect(0, 0, size, size);
            
            // 背景圆形 - 红色
            ctx.beginPath();
            ctx.arc(center, center, radius, 0, 2 * Math.PI);
            ctx.fillStyle = '#ff4757';
            ctx.fill();
            
            // 白色边框
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = Math.max(size * 0.02, 1);
            ctx.stroke();
            
            // 设置白色线条样式
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = Math.max(size * 0.04, 2);
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            // 下载箭头 - 垂直线
            ctx.beginPath();
            ctx.moveTo(center, center - radius * 0.5);
            ctx.lineTo(center, center + radius * 0.2);
            ctx.stroke();
            
            // 下载箭头 - 箭头头部
            const arrowSize = radius * 0.25;
            ctx.beginPath();
            ctx.moveTo(center - arrowSize, center - arrowSize * 0.2);
            ctx.lineTo(center, center + radius * 0.2);
            ctx.lineTo(center + arrowSize, center - arrowSize * 0.2);
            ctx.stroke();
            
            // 底部横线（表示存储）
            ctx.beginPath();
            ctx.moveTo(center - radius * 0.4, center + radius * 0.5);
            ctx.lineTo(center + radius * 0.4, center + radius * 0.5);
            ctx.stroke();
            
            // YouTube播放按钮样式的小三角形
            if (size >= 32) {
                ctx.fillStyle = 'rgba(255, 255, 255, 0.9)';
                ctx.beginPath();
                const triSize = radius * 0.15;
                ctx.moveTo(center - radius * 0.4, center - radius * 0.6);
                ctx.lineTo(center - radius * 0.4, center - radius * 0.3);
                ctx.lineTo(center - radius * 0.15, center - radius * 0.45);
                ctx.closePath();
                ctx.fill();
            }
        }
        
        function generateAllIcons() {
            const sizes = [16, 48, 128];
            
            sizes.forEach(size => {
                const canvas = document.getElementById(`canvas${size}`);
                const downloadLink = document.getElementById(`download${size}`);
                
                // 绘制图标
                drawIcon(canvas, size);
                
                // 设置下载链接
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    downloadLink.href = url;
                    downloadLink.style.display = 'block';
                }, 'image/png');
            });
            
            alert('图标已生成！请右键点击下载链接并选择"另存为"来保存图片到icons文件夹中。');
        }
        
        // 页面加载时自动生成图标
        window.onload = function() {
            generateAllIcons();
        };
    </script>
</body>
</html>