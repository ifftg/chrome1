<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>易弗YouTube视频下载（后端API版）</title>
    <link rel="stylesheet" href="popup.css">
</head>
<body>
    <!-- 插件标题区域 -->
    <div class="header">
        <h1>易弗YouTube视频下载</h1>
        <small style="color: rgba(255,255,255,0.8);">🚀 后端API版本</small>
    </div>

    <!-- URL输入区域 -->
    <div class="input-section">
        <input type="text" id="urlInput" placeholder="请在此处粘贴YouTube视频URL">
        <button id="parseBtn">解析视频</button>
    </div>

    <!-- 错误提示区域 -->
    <div id="errorMessage" class="error-message" style="display: none;"></div>

    <!-- 加载提示 -->
    <div id="loading" class="loading" style="display: none;">
        <div class="spinner"></div>
        <span>正在解析视频信息...</span>
    </div>

    <!-- 视频信息展示区域 -->
    <div id="videoInfo" class="video-info" style="display: none;">
        <!-- 动态生成的视频信息将显示在这里 -->
        <div class="video-thumbnail">
            <img src="" alt="视频缩略图" onerror="this.src='https://via.placeholder.com/300x200/667eea/ffffff?text=无封面'">
        </div>
        <div class="video-details">
            <!-- 视频详情将通过JavaScript动态填充 -->
        </div>
        
        <!-- 格式选择器 -->
        <div style="padding: 15px;">
            <select id="qualitySelect" style="width: 100%; padding: 10px; margin-bottom: 15px;">
                <option value="">请选择下载格式</option>
            </select>
            
            <!-- 下载按钮 -->
            <button id="downloadBtn" class="download-btn" disabled>下载视频</button>
            
            <!-- 下载进度条 -->
            <div id="progressContainer" class="progress-container" style="display: none;">
                <div class="progress-bar">
                    <div id="progressBar" class="progress-fill"></div>
                </div>
                <span id="progressText">0%</span>
            </div>
        </div>
    </div>

    <!-- 历史记录区域 -->
    <div class="history-section">
        <h3>历史下载记录</h3>
        <div id="historyList" class="history-list"></div>
        <button id="clearHistoryBtn" class="clear-history-btn">清除历史记录</button>
    </div>

    <!-- 后端API版本脚本 -->
    <script src="popup-backend.js"></script>
</body>
</html>