# YouTube下载器调试指南

## 🔍 调试步骤

### 1. 打开开发者工具
1. 在Chrome中打开插件
2. 右键点击插件弹窗
3. 选择"检查"或按F12
4. 切换到"Console"标签页

### 2. 测试解析过程
1. 输入YouTube URL（推荐测试URL：`https://www.youtube.com/watch?v=dQw4w9WgXcQ`）
2. 点击"解析视频"
3. 观察控制台输出的调试信息

### 3. 关键调试信息
查看以下输出：
```
开始解析视频: [URL]
找到播放器数据，长度: [数字]
playerResponse结构: [对象键名]
streamingData结构: [对象键名]  
adaptiveFormats数量: [数字]
formats数量: [数字]
成功解析到 [数字] 个真实格式
```

### 4. 问题诊断

#### 如果显示"未找到播放器数据"：
- YouTube页面结构可能已更改
- 网络连接问题
- 视频可能有地区限制

#### 如果显示"未找到流媒体数据"：
- 找到了播放器数据但结构不对
- 可能需要更新解析逻辑

#### 如果显示"没有找到任何真实格式"：
- 找到了数据但没有有效的下载链接
- 视频可能受版权保护

### 5. 格式分类说明

**真实格式类型：**
- `adaptive`: 自适应格式（仅视频，需要单独下载音频）
- `combined`: 合并格式（包含音频和视频，推荐）

**备用格式类型：**
- `fallback`: 无法解析真实格式时的备用选项

### 6. 下载链接验证
真实的YouTube下载链接通常：
- 包含`googlevideo.com`域名
- 很长的URL（包含签名参数）
- 有时效性（几小时后失效）

### 7. 常见问题解决

**问题1：解析成功但下载失败**
- 检查URL是否包含真实的googlevideo.com链接
- 检查链接是否已过期

**问题2：只显示备用格式**
- 表示无法解析真实格式
- 可以尝试不同的测试视频
- 检查视频是否有特殊限制

**问题3：格式显示不正确**
- 检查控制台中的格式解析日志
- 确认mimeType解析是否正确

## 🛠️ 开发者选项

如需更详细的调试信息，可以在`youtube-parser.js`中启用详细日志：
1. 搜索`console.log`语句
2. 取消注释或添加更多日志输出
3. 重新加载插件进行测试

## 📞 问题反馈

如果遇到问题，请提供：
1. 测试的YouTube URL
2. 控制台的完整输出
3. 错误消息截图
4. 浏览器版本信息